<i class="fa fa-gear fa-4x fa-spin txt-color-red center" *ngIf="isUpdating"></i>

<article *ngIf="!isUpdating">
  <div class="row">
    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
      <div *ngFor="let calculoPorRegra of listaConclusaoAcesso">
        <sa-widget *ngIf="isRegrasTransicao" class="no-padding no-margin"
          [colorbutton]="false"
          [editbutton]="false"
          [colorbutton]="false"
          [editbutton]="false"
          [togglebutton]="false"
          [deletebutton]="false"
          [fullscreenbutton]="false"
          [custombutton]="false"
        >
          <header>
            <span class="widget-icon">
              <i class="fa fa-gear"></i>
            </span>
            <h2>{{ calculoPorRegra.label }}</h2>
          </header>
          <!-- <div class="widget-body" style="min-height: auto;"></div> -->
        </sa-widget>
        <accordion
          class="smart-accordion-default panel-group"
          [closeOthers]="true"
        >
          <div
            *ngFor="
              let calculoPossivel of calculoPorRegra.calculosPossiveis;
              let i = index
            "
          >
            <accordion-group [isOpen]="false" #group1>
              <h4 class="panel-title" accordion-heading>
                <a>
                  <strong
                    >Cálculo com
                    {{ calculoPossivel.numeroCompetencias }} salários de
                    contribuição - RMI
                    {{ calculoPossivel.rmi.valueString }}</strong
                  >
                  <i
                    class="fa fa-gear fa-2x fa-spin txt-color-red pull-right"
                    *ngIf="isUpdating"
                  ></i>
                  <button
                    *ngIf="!isUpdating"
                    class="btn btn-primary pull-right btn-xs not-print"
                    type="button"
                  >
                    &nbsp;&nbsp;
                    {{ !group1?.isOpen ? "Abrir" : "Fechar" }}
                    <i
                      *ngIf="!isUpdating"
                      class="pull-right fa fa-lg"
                      [ngClass]="{
                        'fa-angle-down': group1?.isOpen,
                        'fa-angle-up': !group1?.isOpen
                      }"
                    ></i
                    >&nbsp;&nbsp;
                  </button>
                </a>
              </h4>
              <div class="no-padding">
                <sa-widget [colorbutton]="false" [editbutton]="false">
                  <div *ngIf="!isUpdating">
                    <div class="widget-body no-padding">
                      <sa-datatable
                        [options]="calculoPossivel.listaCompetencias"
                        [responsive]="false"
                        paginationLength="true"
                        *ngIf="!isUpdating"
                        tableClass="table table-striped table-bordered table-hover"
                        width="100%"
                      >
                        <thead>
                          <tr>
                            <th>#</th>
                            <th>Competência</th>
                            <th>Índice</th>
                            <th>Salário de Contribuição</th>
                            <th>Salário de Contribuição Corrigida</th>
                            <th>Observação</th>
                          </tr>
                        </thead>
                      </sa-datatable>
                    </div>
                  </div>
                </sa-widget>

                <!-- conclusoes genericas -->
                <div *ngIf="!isRegrasPensaoObitoInstituidorAposentado">
                  <app-conclusoes-rmi
                    [conclusoes]="calculoPossivel.conclusoes"
                    [regraLabel]="calculoPorRegra.label"
                    [isUpdating]="isUpdating"
                  ></app-conclusoes-rmi>
                </div>
              </div>
            </accordion-group>
          </div>
        </accordion>
      </div>
    </div>
  </div>
</article>
