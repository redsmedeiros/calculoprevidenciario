<div id="content" *ngIf="!isUpdating">
  <sa-widgets-grid>
    <div id="box-dados-segurado">
      <article class="col-sm-12 col-md-12 col-lg-12" *ngIf="!isUpdating">
        <h1>Cálculo: Contribuições Atrasadas - Lei complementar n. 128/08 </h1>
        <ol class="breadcrumb">
          <li class="breadcrumb-item"><a href="#/contribuicoes/contribuicoes-segurados"> Criar/Buscar Segurado</a></li>
          <li class="breadcrumb-item"><a href="#/contribuicoes/contribuicoes-calculos/{{idSegurado}}"> Lista de Cálculos</a></li>
          <li class="breadcrumb-item"><a href="#/contribuicoes/contribuicoes-calculos/{{idSegurado}}/{{idCalculo}}/edit"> Informações para o cálculo</a></li>
          <li class="breadcrumb-item active">Resultados</li>
        </ol>
        <!-- Widget ID (each widget will need unique ID)-->
        <sa-widget [colorbutton]="false"
              [editbutton]="false"
              [togglebutton]="false"
              [deletebutton]="false"
              [fullscreenbutton]="false"
              [custombutton]="false"
              [sortable]="false">
          <header>
            <span class="widget-icon">
              <i class="fa fa-edit"></i>
            </span>
            <h2>Dados do segurado selecionado</h2>
          </header>
          <!-- widget div-->
          <div>
            <!-- widget content -->
            <div class="widget-body">
              <ul class="list-unstyled">
                <li><b>Nome:</b> {{segurado.nome}}</li>
                <li *ngIf="segurado.numero_documento" ><b>Pis:</b> {{segurado.numero_documento}}</li>
                <li><b>Data de nascimento:</b> {{segurado.data_nascimento}}</li>
                <li *ngIf="segurado.sexo=='m'"><b>Sexo:</b>  Masculino</li>
                <li *ngIf="segurado.sexo=='f'"><b>Sexo:</b>  Feminino</li>
                <li><b>Idade atual:</b>  {{segurado.idade}} anos</li>
              </ul>
              <div id="printableSegurado" hidden>
                <h1>Cálculo: Contribuições Atrasadas - Lei complementar n. 128/08 </h1>
                <table class="table table-bordered table-hover">
                  <caption><h2>Dados do Segurado</h2></caption>
                  <tr>
                    <td width="50%">
                      <b>Nome:</b>
                    </td>
                    <td width="50%">
                      {{segurado.nome}}
                    </td>
                  </tr>
                  <tr>
                    <td width="50%">
                      <b>PIS:</b>
                    </td>
                    <td width="50%">
                      {{segurado.numero_documento}}
                    </td>
                  </tr>
                  <tr>
                    <td width="50%">
                      <b>Data de nascimento:</b>
                    </td>
                    <td width="50%">
                       {{segurado.data_nascimento}}
                    </td>
                  </tr>
                  <tr>
                    <td width="50%">
                      <b>Sexo:</b>
                    </td>
                    <td width="50%">
                      <span *ngIf="segurado.sexo=='m'">Masculino</span><span *ngIf="segurado.sexo=='f'">Feminino</span>
                    </td>
                  </tr>
                </table>
              </div>
              <div class="form-actions">
                <div class="row">
                  <div class="col-md-12">
                    <button type="submit" (click)="editSegurado()" class="btn btn-labeled btn-info pull-left">
                      <span class="btn-label">
                        <i class="fa fa-pencil-square-o"></i>
                      </span> Editar
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </sa-widget>
      </article>
    </div>
    <div class="row">
    	<article class="col-sm-12 col-md-12 col-lg-12" *ngIf="!isUpdating">
        <sa-widget [colorbutton]="false" [editbutton]="false" [togglebutton]="false"
              [deletebutton]="false"
              [fullscreenbutton]="false">
          <header>
            <span class="widget-icon">
              <i class="fa fa-calculator"></i>
            </span>
            <h2>Dados do cálculo</h2>
          </header>
          <div>
            <div class="widget-body">
              <ul class="list-unstyled">
                <li><b>Número de contribuições consideradas:</b> {{calculoComplementar.numero_contribuicoes}} </li>
                <li><b>Valor total das 80% maiores contribuições corrigidas:</b> {{formatMoney(calculoComplementar.total_contribuicao)}}</li>
                <li><b>Valor médio final:</b> {{formatMoney(calculoComplementar.media_salarial)}}</li>
                <li><b>Valor base para recolhimento de aliquota:</b> {{formatMoney(baseAliquota)}}</li>
              </ul>
              <div id="printableDadosCalculo" hidden>
                <table class="table table-bordered table-hover">
                  <caption><h2>Dados do cálculo</h2></caption>
                  <tr>
                    <td width="50%">
                      <b>Número de contribuições consideradas:</b>
                    </td>
                    <td width="50%">
                      {{calculoComplementar.numero_contribuicoes}}
                    </td>
                  </tr>
                  <tr>
                    <td width="50%">
                      <b>Valor total das 80% maiores contribuições corrigidas:</b>
                    </td>
                    <td width="50%">
                      {{formatMoney(calculoComplementar.total_contribuicao)}}
                    </td>
                  </tr>
                  <tr>
                    <td width="50%">
                      <b>Valor médio final:</b>
                    </td>
                    <td width="50%">
                       {{formatMoney(calculoComplementar.media_salarial)}}
                    </td>
                  </tr>
                  <tr>
                    <td width="50%">
                      <b>Valor base para recolhimento de aliquota:</b>
                    </td>
                    <td width="50%">
                      {{formatMoney(baseAliquota)}}
                    </td>
                  </tr>
                </table>
              </div>
            </div>
          </div>
        </sa-widget>
      </article>

      <article class="col-sm-12 col-md-12 col-lg-12" *ngIf="!isUpdating" id="detalhamentoCalculo">
        <sa-widget [colorbutton]="false" [editbutton]="false" [deletebutton]="false">
          <header>
            <span class="widget-icon">
              <i class="fa fa-table"></i>
            </span>
            <h2>Detalhamento</h2>
          </header>
          <div>
            <div class="col-sm-12" *ngIf="!hasDetalhe">
              <div class="well">
                <p><b>Detalhamento do cálculo disponível apenas no ato de geração do valor.</b></p>
              </div>
            </div>
            <div class="widget-body no-padding" *ngIf="hasDetalhe" >
              <sa-datatable *ngIf="hasDetalhe" [options]="detalhesTableOptions" [responsive]="false"
                paginationLength="true" tableClass="table table-striped table-bordered table-hover" width="100%">
                <thead>
                  <tr>
                    <th>#</th>
                    <th>Mês de contribuição</th>
                    <th>Contribuição Base</th>
                    <th>Índices</th>
                    <th>Valor corrigido</th>
                  </tr>
                </thead>
              </sa-datatable>
              <small style="padding-left: 10px " class="text-danger"><b>Valores em vermelho correspondem a contribuições descartadas.</b></small>
            </div> 
          </div>
        </sa-widget>
      </article>

      <article class="col-sm-12 col-md-12 col-lg-12" *ngIf="!isUpdating" >
        <sa-widget [colorbutton]="false" [editbutton]="false" id="resultadosCalculo" [deletebutton]="false">
          <header>
            <span class="widget-icon">
              <i class="fa fa-table"></i>
            </span>
            <h2>Resultados</h2>
          </header>
          <div>
            <div class="widget-body no-padding" >
              <sa-datatable [options]="resultadosTableOptions" [responsive]="false"
                paginationLength="true" tableClass="table table-striped table-bordered table-hover" width="100%">
                <thead>
                  <tr>
                    <th>Competência</th>
                    <th>Valor contribuição</th>
                    <th *ngIf="mostrarJuros">Juros</th>
                    <th>Multa</th>
                    <th>Total</th>
                  </tr>
                </thead>
              </sa-datatable>
            </div> 
          </div>
          <div class="col-sm-12">
            <div class="well">
              <p>
                O cálculo dos valores apresentados acima foram realizados com base na recente Lei Complementar nº. 128, de dezembro de 2008, que deu nova redação ao artigo 45 da Lei nº. 8.212/91. Competências posteriores ao período já decadente devem ser calculados de acordo com o sistema disponibilizado no site da Previdência Social. <a href="https://www.inss.gov.br/servicos-do-inss/calculo-da-guia-da-previdencia-social-gps/"  target="_blank">https://www.inss.gov.br/servicos-do-inss/calculo-da-guia-da-previdencia-social-gps/</a>.
              </p>
            </div>
          </div>
        </sa-widget>
        <div class="form-actions">
            <div class="row">
              <div class="col-md-12">
                <button (click)="voltar()" type="submit" class="btn btn-labeled btn-default margin-bottom-10">
                  <span class="btn-label">
                    <i class="fa fa-arrow-circle-left"></i>
                  </span> Voltar
                </button>
                <button (click)="listaSegurados()" type="submit" class="btn btn-labeled btn-primary margin-bottom-10">
                  <span class="btn-label">
                    <i class="fa fa-list"></i>
                  </span> Listagem de segurados 
                </button>
                <button (click)="imprimirPagina()" type="submit" class="btn btn-labeled btn-success margin-bottom-10">
                  <span class="btn-label">
                    <i class="fa fa-print"></i>
                  </span> Imprimir
                </button>
              </div>
            </div>
          </div>
      </article>
    </div>
  </sa-widgets-grid>
</div>