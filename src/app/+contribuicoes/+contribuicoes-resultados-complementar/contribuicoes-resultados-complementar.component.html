<div id="content" *ngIf="!isUpdating">
  <sa-widgets-grid>
    <div id="box-dados-segurado">
      <article class="col-sm-12 col-md-12 col-lg-12" *ngIf="!isUpdating">
        <h1>Contribuições Atrasadas - Lei complementar n. 128/08</h1>
        <ol class="breadcrumb">
          <li class="breadcrumb-item">
            <a href="#/contribuicoes/contribuicoes-segurados">
              Criar/Buscar Segurado</a
            >
          </li>
          <li class="breadcrumb-item">
            <a href="#/contribuicoes/contribuicoes-calculos/{{ idSegurado }}">
              Lista de Cálculos</a
            >
          </li>
          <li class="breadcrumb-item">
            <a
              href="#/contribuicoes/contribuicoes-calculos/{{ idSegurado }}/{{
                idCalculo
              }}/edit"
            >
              Informações para o Cálculo</a
            >
          </li>
          <li class="breadcrumb-item active">Resultados</li>
        </ol>
      </article>
    </div>

    <div class="row">
      <div class="col-sm-12 col-md-12 col-lg-12">
        <sa-widget [colorbutton]="false" [editbutton]="false">
          <header>
            <span class="widget-icon">
              <i class="fa fa-edit"></i>
            </span>
            <h2>Dados do Segurado</h2>
            <button
              class="btn btn-labeled btn-info pull-right"
              *ngIf="!isPlanejamento"
              type="submit"
              (click)="editSegurado()"
            >
              <span class="btn-label">
                <i class="fa fa-pencil"></i>
              </span>
              Editar
            </button>
          </header>
          <!-- widget div-->
          <div class="my-0 p-0">
            <!-- widget content -->
            <div class="widget-body widget-body-custom m-0 p-0">
              <table
                class="
                  table table-condensed table-bordered
                  no-padding no-margin
                "
              >
                <thead>
                  <tr>
                    <th width="40%">Nome</th>
                    <th>Data de Nascimento</th>
                    <th>Sexo</th>
                    <th>Idade atual</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td width="40%">{{ segurado.nome }}</td>
                    <td>{{ segurado.data_nascimento }}</td>
                    <td>
                      {{ segurado.sexo == "m" ? "Masculino" : "Feminino" }}
                    </td>
                    <td>{{ this.idadeSegurado }} anos</td>
                  </tr>
                </tbody>
              </table>
              <!-- <ul class="list-inline m-0">
                <li class="px-5">
                  <strong>Nome:</strong> {{ segurado.nome }}
                </li>
                <li class="px-5">
                  <strong>Data de Nascimento:</strong>
                  {{ segurado.data_nascimento }}
                </li>
                <li class="px-5">
                  <strong>Sexo:</strong>
                  {{ segurado.sexo == "m" ? "Masculino" : "Feminino" }}
                </li>
                <li class="px-5">
                  <strong>Idade atual:</strong> {{ this.idadeSegurado }} anos
                </li>
              </ul> -->
              <div id="printableSegurado" hidden>
                <table class="table table-bordered table-hover">
                  <!-- <caption><h2>Dados do Segurado</h2></caption> -->
                  <tr>
                    <td width="50%" style="text-align: right">
                      <b>Nome:</b>
                    </td>
                    <td width="50%">
                      {{ segurado.nome }}
                    </td>
                  </tr>
                  <tr *ngIf="segurado.numero_documento">
                    <td width="50%" style="text-align: right">
                      <b>{{
                        segurado.getDocumentType(segurado.id_documento)
                      }}</b>
                    </td>
                    <td width="50%">
                      {{ segurado.numero_documento }}
                    </td>
                  </tr>
                  <tr>
                    <td width="50%" style="text-align: right">
                      <b>Data de nascimento:</b>
                    </td>
                    <td width="50%">
                      {{ segurado.data_nascimento }}
                    </td>
                  </tr>
                  <tr>
                    <td width="50%" style="text-align: right">
                      <b>Sexo:</b>
                    </td>
                    <td width="50%">
                      <span *ngIf="segurado.sexo == 'm'">Masculino</span
                      ><span *ngIf="segurado.sexo == 'f'">Feminino</span>
                    </td>
                  </tr>
                </table>
              </div>
              <!-- <div
                class="form-actions no-padding mt-3"
                *ngIf="!isPlanejamento"
              >
                <div class="row">
                  <div class="col-md-12">
                    <button
                    *ngIf="!isPlanejamento"
                      type="submit"
                      (click)="editSegurado()"
                      class="btn btn-labeled btn-info pull-right"
                      title="Editar o segurado."
                    >
                      <span class="btn-label">
                        <i class="fa fa-pencil"></i>
                      </span>
                      Editar
                    </button>
                  </div>
                </div>
              </div> -->
            </div>
          </div>
        </sa-widget>
      </div>
    </div>

    <div class="row">
      <article class="col-sm-12 col-md-12 col-lg-12" *ngIf="!isUpdating">
        <sa-widget
          [colorbutton]="false"
          [editbutton]="false"
          [togglebutton]="false"
          [deletebutton]="false"
          [fullscreenbutton]="false"
        >
          <header>
            <span class="widget-icon">
              <i class="fa fa-calculator"></i>
            </span>
            <h2>Informações do Cálculo</h2>
          </header>
          <div>
            <div class="widget-body ">
              <ul class="list-unstyled">
                <li>
                  <b>Quantidade de salários de contribuição (100%):</b>
                  {{quantcontribuicoes100}}
                </li>
                <li>
                  <strong>Quantidade de Salários de Contribuição Utilizados (80% maiores):</strong>
                  {{ quantContribuicoes80 }} 
                </li>
                <li>
                  <b>Soma dos Salários de Contribuição Considerados:</b>
                  {{ formatMoney(somaDosSalariosContribuicao) }}
                </li>
                <li>
                  <b>Média dos Salários de Contribuição:</b>
                  {{ formatMoney(mediaDosSalariosContribuicao) }}
                </li>
                <li>
                  <b>Alíquota da Contribuição:</b>
                  20%
                </li>
                <li>
                  <b>Valor da Contribuição:</b>
                  {{ formatMoney(baseAliquota) }}
                </li>
              </ul>
              <div id="printableDadosCalculo" hidden>
                <table class="table table-bordered table-hover table-condensed">
                  <caption>
                    <h2>Dados do cálculo</h2>
                  </caption>
                  <tr>
                    <td width="50%">
                      <b>Número de contribuições consideradas:</b>
                    </td>
                    <td width="50%">
                      {{ calculoComplementar.numero_contribuicoes }}
                    </td>
                  </tr>
                  <tr>
                    <td width="50%">
                      <b
                        >Valor total das 80% maiores contribuições
                        corrigidas:</b
                      >
                    </td>
                    <td width="50%">
                      {{ formatMoney(calculoComplementar.total_contribuicao) }}
                    </td>
                  </tr>
                  <tr>
                    <td width="50%">
                      <b>Valor médio final:</b>
                    </td>
                    <td width="50%">
                      {{ formatMoney(calculoComplementar.media_salarial) }}
                    </td>
                  </tr>
                  <tr>
                    <td width="50%">
                      <b>Valor base para recolhimento de aliquota:</b>
                    </td>
                    <td width="50%">
                      {{ formatMoney(baseAliquota) }}
                    </td>
                  </tr>
                </table>
              </div>
            </div>
          </div>
        </sa-widget>
      </article>

      <article
        class="col-sm-12 col-md-12 col-lg-12"
        *ngIf="!isUpdating"
        id="detalhamentoCalculo"
      >
        <sa-widget
          [colorbutton]="false"
          [editbutton]="false"
          [deletebutton]="false"
        >
          <header>
            <span class="widget-icon">
              <i class="fa fa-table"></i>
            </span>
            <h2>Detalhamento</h2>
          </header>
          <div>
            <div class="col-sm-12" *ngIf="!hasDetalhe">
              <div class="well">
                <p>
                  <b
                    >Detalhamento do cálculo disponível apenas no ato de geração
                    do valor.</b
                  >
                </p>
              </div>
            </div>
            <div class="widget-body no-padding hidden-dt" *ngIf="hasDetalhe">
              <sa-datatable
                *ngIf="hasDetalhe"
                [options]="detalhesTableOptions"
                [responsive]="false"
                paginationLength="true"
                tableClass="table table-striped table-bordered table-hover table-condensed-custom"
                width="100%"
              >
                <thead>
                  <tr>
                    <th class="text-center">#</th>
                    <th class="text-center">Competência</th>
                    <th class="text-center">Salário de Contribuição</th>
                    <th class="text-center"> Índice</th>
                    <th class="text-center">Salário de Contribuição Corrigido</th>
                    <th class="text-center">Observação</th>
                  </tr>
                </thead>
              </sa-datatable>
              <small style="padding-left: 10px" class="text-danger"
                ><b
                  >Valores em vermelho correspondem a contribuições
                  descartadas.</b
                ></small
              >
            </div>
          </div>
        </sa-widget>
      </article>

      

      <article class="col-sm-12 col-md-12 col-lg-12" *ngIf="!isUpdating">
        <sa-widget
          [colorbutton]="false"
          [editbutton]="false"
          id="resultadosCalculo"
          [deletebutton]="false"
        >
          <header>
            <span class="widget-icon">
              <i class="fa fa-table"></i>
            </span>
            <h2>Resultados</h2>
          </header>
          <div>
            <div class="widget-body no-padding hidden-dt">
              <sa-datatable
                [options]="resultadosTableOptions"
                [responsive]="false"
                paginationLength="true"
                tableClass="table table-striped table-bordered table-hover table-condensed-custom"
                width="100%"
              >
                <thead>
                  <tr>
                    <th>Competência</th>
                    <th>Valor da Contribuição</th>
                    <th *ngIf="mostrarJuros">Valor dos Juros</th>
                    <th>Valor da Multa</th>
                    <th>Valor total</th>
                  </tr>
                </thead>
              </sa-datatable>
            </div>
          </div>
          <div class="col-sm-12">
            <div class="well">
              <p>
                O cálculo dos valores apresentados acima foram realizados com
                base na recente Lei Complementar nº. 128, de dezembro de 2008,
                que deu nova redação ao artigo 45 da Lei nº. 8.212/91.
                Competências posteriores ao período já decadente devem ser
                calculados de acordo com o sistema disponibilizado no site da
                Previdência Social.
                <a
                  href="https://www.inss.gov.br/servicos-do-inss/calculo-da-guia-da-previdencia-social-gps/"
                  target="_blank"
                  >https://www.inss.gov.br/servicos-do-inss/calculo-da-guia-da-previdencia-social-gps/</a
                >.
              </p>
            </div>
          </div>
        </sa-widget>
        <div class="form-actions">
          <div class="row">
            <div class="col-md-12">
              <!-- <button (click)="voltar()" type="submit" class="btn btn-labeled btn-default margin-bottom-10">
                  <span class="btn-label">
                    <i class="fa fa-arrow-circle-left"></i>
                  </span> Voltar
                </button>
                <button (click)="listaSegurados()" type="submit" class="btn btn-labeled btn-primary margin-bottom-10">
                  <span class="btn-label">
                    <i class="fa fa-list"></i>
                  </span> Listagem de segurados 
                </button> -->
              <button
                (click)="imprimirPagina()"
                type="submit"
                class="btn btn-labeled btn-info margin-bottom-10"
              >
                <span class="btn-label">
                  <i class="fa fa-print"></i>
                </span>
                Imprimir
              </button>
            </div>
          </div>
        </div>
      </article>

      <article class="col-sm-12 col-md-12 col-lg-12" *ngIf="!isUpdating">
        <sa-widget
          [colorbutton]="false"
          [editbutton]="false"
          [togglebutton]="false"
          [deletebutton]="false"
          [fullscreenbutton]="false"
        >
          <header>
            <span class="widget-icon">
              <i class="fa fa-calculator"></i>
            </span>
            <h2>Informações do Cálculo</h2>
          </header>
          <div>
            <div class="widget-body ">
              <ul class="list-unstyled">
                <li>
                  <b>Quantidade de salários de contribuição (100%):</b>
                  {{quantcontribuicoes100}}
                </li>
                <li>
                  <strong>Quantidade de Salários de Contribuição Utilizados (80% maiores):</strong>
                  {{ quantContribuicoes80 }} 
                </li>
                <li>
                  <b>Soma dos Salários de Contribuição Considerados:</b>
                  {{ formatMoney(somaDosSalariosContribuicao) }}
                </li>
                <li>
                  <b>Média dos Salários de Contribuição:</b>
                  {{ formatMoney(mediaDosSalariosContribuicao) }}
                </li>
                <li>
                  <b>Alíquota da Contribuição:</b>
                  20%
                </li>
                <li>
                  <b>Valor da Contribuição:</b>
                  {{ formatMoney(baseAliquota) }}
                </li>
              </ul>
              <div id="printableDadosCalculo" hidden>
                <table class="table table-bordered table-hover table-condensed">
                  <caption>
                    <h2>Dados do cálculo</h2>
                  </caption>
                  <tr>
                    <td width="50%">
                      <b>Número de contribuições consideradas:</b>
                    </td>
                    <td width="50%">
                      {{ calculoComplementar.numero_contribuicoes }}
                    </td>
                  </tr>
                  <tr>
                    <td width="50%">
                      <b
                        >Valor total das 80% maiores contribuições
                        corrigidas:</b
                      >
                    </td>
                    <td width="50%">
                      {{ formatMoney(calculoComplementar.total_contribuicao) }}
                    </td>
                  </tr>
                  <tr>
                    <td width="50%">
                      <b>Valor médio final:</b>
                    </td>
                    <td width="50%">
                      {{ formatMoney(calculoComplementar.media_salarial) }}
                    </td>
                  </tr>
                  <tr>
                    <td width="50%">
                      <b>Valor base para recolhimento de aliquota:</b>
                    </td>
                    <td width="50%">
                      {{ formatMoney(baseAliquota) }}
                    </td>
                  </tr>
                </table>
              </div>
            </div>
          </div>
        </sa-widget>
      </article>
    </div>
  </sa-widgets-grid>
</div>
